#!/usr/bin/env node

/**
 * üé≤ –ê–í–¢–û–¢–ï–°–¢: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã –∫—É–±–∏–∫–æ–≤ –∏ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
 * 
 * –¢–µ—Å—Ç–∏—Ä—É–µ—Ç:
 * 1. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫—É–±–∏–∫–æ–≤ –≤ —Ü–µ–Ω—Ç—Ä–µ (–∑–∞–º–µ–Ω—É "–ü–û–¢–û–ö –î–ï–ù–ï–ì")
 * 2. –õ–æ–≥–∏–∫—É –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (1/2 –∫—É–±–∏–∫–∞ –¥–ª—è –º–∞–ª–æ–≥–æ –∫—Ä—É–≥–∞, 2/3 –¥–ª—è –±–æ–ª—å—à–æ–≥–æ)
 * 3. –§—É–Ω–∫—Ü–∏—é –ø–æ–∫—É–ø–∫–∏ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
 * 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
 */

console.log('üé≤ [TEST] –ó–∞–ø—É—Å–∫ –∞–≤—Ç–æ—Ç–µ—Å—Ç–∞ –∫—É–±–∏–∫–æ–≤ –∏ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...\n');

// –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–π —Å –ø–æ–ª–µ–º charity
console.log('üìã –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—è charity –≤ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è—Ö');
console.log('='.repeat(60));

try {
  const { PROFESSIONS, buyCharity } = require('./client/src/data/professions.js');
  
  console.log(`‚úÖ –ò–º–ø–æ—Ä—Ç —É—Å–ø–µ—à–µ–Ω, –Ω–∞–π–¥–µ–Ω–æ ${PROFESSIONS.length} –ø—Ä–æ—Ñ–µ—Å—Å–∏–π`);
  
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º —á—Ç–æ —É –≤—Å–µ—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–π –µ—Å—Ç—å –ø–æ–ª–µ charity
  const allHaveCharity = PROFESSIONS.every(prof => 'charity' in prof);
  console.log(`‚úÖ –í—Å–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏–º–µ—é—Ç –ø–æ–ª–µ charity: ${allHaveCharity}`);
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–∏–º–µ—Ä–æ–≤
  console.log('\nüìä –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–π:');
  PROFESSIONS.slice(0, 3).forEach(prof => {
    console.log(`   ${prof.name}: charity = ${prof.charity}`);
  });
  
  // –¢–µ—Å—Ç 2: –§—É–Ω–∫—Ü–∏—è –ø–æ–∫—É–ø–∫–∏ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  console.log('\nüìã –¢–µ—Å—Ç 2: –§—É–Ω–∫—Ü–∏—è –ø–æ–∫—É–ø–∫–∏ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏');
  console.log('='.repeat(60));
  
  const testProfession = PROFESSIONS[0]; // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –ø—Ä–æ—Ñ–µ—Å—Å–∏—é
  console.log(`üéØ –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏—é: ${testProfession.name}`);
  console.log(`   –î–æ –ø–æ–∫—É–ø–∫–∏: charity = ${testProfession.charity}`);
  
  const updatedProfession = buyCharity(testProfession);
  console.log(`   –ü–æ—Å–ª–µ –ø–æ–∫—É–ø–∫–∏: charity = ${updatedProfession.charity}`);
  
  if (updatedProfession.charity === true) {
    console.log('‚úÖ –§—É–Ω–∫—Ü–∏—è buyCharity —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
  } else {
    console.error('‚ùå –§—É–Ω–∫—Ü–∏—è buyCharity —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
  }
  
  // –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–æ–∫—É–ø–∫–∏
  console.log('\nüìã –¢–µ—Å—Ç 3: –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏');
  console.log('='.repeat(60));
  
  const secondUpdate = buyCharity(updatedProfession);
  console.log(`   –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–∫—É–ø–∫–∞: charity = ${secondUpdate.charity}`);
  
  if (secondUpdate.charity === true) {
    console.log('‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)');
  } else {
    console.error('‚ùå –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø–æ–∫—É–ø–∫–∞ –∏–∑–º–µ–Ω–∏–ª–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)');
  }
  
  // –¢–µ—Å—Ç 4: –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—É–±–∏–∫–æ–≤
  console.log('\nüìã –¢–µ—Å—Ç 4: –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—É–±–∏–∫–æ–≤');
  console.log('='.repeat(60));
  
  const simulateDiceDisplay = (profession) => {
    const smallCircleDice = profession.charity ? 2 : 1;
    const bigCircleDice = profession.charity ? 3 : 2;
    
    return {
      smallCircle: smallCircleDice,
      bigCircle: bigCircleDice,
      profession: profession.name,
      hasCharity: profession.charity
    };
  };
  
  // –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
  const scenarios = [
    { name: '–ë–µ–∑ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏', profession: PROFESSIONS[0] },
    { name: '–° –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é', profession: buyCharity(PROFESSIONS[1]) }
  ];
  
  scenarios.forEach(scenario => {
    const result = simulateDiceDisplay(scenario.profession);
    console.log(`\nüé≤ ${scenario.name}:`);
    console.log(`   –ü—Ä–æ—Ñ–µ—Å—Å–∏—è: ${result.profession}`);
    console.log(`   –ë–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${result.hasCharity ? '–î–ê' : '–ù–ï–¢'}`);
    console.log(`   –ú–∞–ª—ã–π –∫—Ä—É–≥: ${result.smallCircle} –∫—É–±–∏–∫(–∞)`);
    console.log(`   –ë–æ–ª—å—à–æ–π –∫—Ä—É–≥: ${result.bigCircle} –∫—É–±–∏–∫(–∞)`);
  });
  
  // –¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–π
  console.log('\nüìã –¢–µ—Å—Ç 5: –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º');
  console.log('='.repeat(60));
  
  const charityStats = PROFESSIONS.reduce((stats, prof) => {
    if (prof.charity) {
      stats.withCharity++;
    } else {
      stats.withoutCharity++;
    }
    return stats;
  }, { withCharity: 0, withoutCharity: 0 });
  
  console.log(`üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:`);
  console.log(`   –° –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é: ${charityStats.withCharity}`);
  console.log(`   –ë–µ–∑ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ${charityStats.withoutCharity}`);
  console.log(`   –í—Å–µ–≥–æ –ø—Ä–æ—Ñ–µ—Å—Å–∏–π: ${PROFESSIONS.length}`);
  
  // –¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
  console.log('\nüìã –¢–µ—Å—Ç 6: –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫—É–±–∏–∫–æ–≤');
  console.log('='.repeat(60));
  
  console.log('üéØ –í —Ü–µ–Ω—Ç—Ä–µ –∏–≥—Ä–æ–≤–æ–≥–æ –ø–æ–ª—è –¥–æ–ª–∂–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è:');
  console.log('   üé≤ –ö–£–ë–ò–ö–ò');
  console.log('   –ú–∞–ª—ã–π –∫—Ä—É–≥: [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ] –∫—É–±–∏–∫(–∞)');
  console.log('   –ë–æ–ª—å—à–æ–π –∫—Ä—É–≥: [–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ] –∫—É–±–∏–∫(–∞)');
  console.log('   [4 –∫–æ–ª–æ–¥—ã –∫–∞—Ä—Ç]');
  
  console.log('\nüìã –õ–æ–≥–∏–∫–∞ –∫—É–±–∏–∫–æ–≤:');
  console.log('   –ë–µ–∑ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:');
  console.log('     –ú–∞–ª—ã–π –∫—Ä—É–≥: 1 –∫—É–±–∏–∫');
  console.log('     –ë–æ–ª—å—à–æ–π –∫—Ä—É–≥: 2 –∫—É–±–∏–∫–∞');
  console.log('   –° –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é:');
  console.log('     –ú–∞–ª—ã–π –∫—Ä—É–≥: 2 –∫—É–±–∏–∫–∞');
  console.log('     –ë–æ–ª—å—à–æ–π –∫—Ä—É–≥: 3 –∫—É–±–∏–∫–∞');
  
  console.log('\nüéØ –†–ï–ó–£–õ–¨–¢–ê–¢ –¢–ï–°–¢–ê:');
  console.log('‚úÖ –í—Å–µ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏–º–µ—é—Ç –ø–æ–ª–µ charity');
  console.log('‚úÖ –§—É–Ω–∫—Ü–∏—è buyCharity —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
  console.log('‚úÖ –õ–æ–≥–∏–∫–∞ –∫—É–±–∏–∫–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
  console.log('‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é');
  
  console.log('\nüìù –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:');
  console.log('1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–≥—Ä—É –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
  console.log('2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –≤ —Ü–µ–Ω—Ç—Ä–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è "üé≤ –ö–£–ë–ò–ö–ò"');
  console.log('3. –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—É–±–∏–∫–æ–≤');
  console.log('4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–∫—É–ø–∫—É –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏');
  
} catch (error) {
  console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏:', error.message);
  console.error('üìÅ –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª professions.js —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ');
  process.exit(1);
}

