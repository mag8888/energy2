<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
            background: #2F1B40;
            color: white;
        }
        .test-card {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .room-section {
            background: rgba(0,255,0,0.1);
            border: 1px solid #4CAF50;
            border-radius: 8px;
            padding: 15px;
            margin: 10px 0;
        }
        .player-item {
            background: rgba(255,255,255,0.05);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 5px;
            padding: 10px;
            margin: 5px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .player-id {
            font-weight: bold;
            color: #FFD700;
        }
        .room-id {
            color: #4CAF50;
        }
        .socket-id {
            color: #2196F3;
            font-size: 0.9em;
        }
        .filter-btn {
            background: #FF9800;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .filter-btn:hover {
            background: #F57C00;
        }
        .filter-btn.active {
            background: #4CAF50;
        }
    </style>
</head>
<body>
    <h1>üéÆ –¢–µ—Å—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º</h1>
    
    <div class="test-card">
        <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:</h3>
        <p>1. –û—Ç–∫—Ä–æ–π—Ç–µ –∏–≥—Ä—É –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö</p>
        <p>2. –°–æ–∑–¥–∞–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã</p>
        <p>3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∏–∂–µ</p>
        <p>4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–≥—Ä–æ–∫–∏ –∏–∑ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç—ã</p>
    </div>
    
    <div class="test-card">
        <h3>–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º:</h3>
        <button id="filterAll" class="filter-btn active" onclick="filterByRoom('all')">–í—Å–µ –∏–≥—Ä–æ–∫–∏</button>
        <button id="filterRoom1" class="filter-btn" onclick="filterByRoom('room1')">–ö–æ–º–Ω–∞—Ç–∞ 1</button>
        <button id="filterRoom2" class="filter-btn" onclick="filterByRoom('room2')">–ö–æ–º–Ω–∞—Ç–∞ 2</button>
        <button id="filterRoom3" class="filter-btn" onclick="filterByRoom('room3')">–ö–æ–º–Ω–∞—Ç–∞ 3</button>
    </div>
    
    <div class="test-card">
        <h3>–°–ø–∏—Å–æ–∫ –∏–≥—Ä–æ–∫–æ–≤:</h3>
        <div id="playersList">
            <p>–ó–∞–≥—Ä—É–∑–∫–∞...</p>
        </div>
    </div>
    
    <div class="test-card">
        <h3>–û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:</h3>
        <div id="debugInfo">
            <p>–¢–µ–∫—É—â–∏–π —Ñ–∏–ª—å—Ç—Ä: <span id="currentFilter">–í—Å–µ –∏–≥—Ä–æ–∫–∏</span></p>
            <p>–í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤: <span id="totalPlayers">0</span></p>
            <p>–û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–æ: <span id="filteredPlayers">0</span></p>
        </div>
    </div>

    <script>
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤
        const testPlayers = [
            { id: 'PLAYER001', username: '–ò–≥—Ä–æ–∫ 001', roomId: 'room1', socketId: 'socket001', balance: 2000 },
            { id: 'PLAYER002', username: '–ò–≥—Ä–æ–∫ 002', roomId: 'room1', socketId: 'socket002', balance: 1500 },
            { id: 'PLAYER003', username: '–ò–≥—Ä–æ–∫ 003', roomId: 'room2', socketId: 'socket003', balance: 3000 },
            { id: 'PLAYER004', username: '–ò–≥—Ä–æ–∫ 004', roomId: 'room2', socketId: 'socket004', balance: 2500 },
            { id: 'PLAYER005', username: '–ò–≥—Ä–æ–∫ 005', roomId: 'room3', socketId: 'socket005', balance: 1800 },
            { id: 'PLAYER006', username: '–ò–≥—Ä–æ–∫ 006', roomId: 'room3', socketId: 'socket006', balance: 2200 }
        ];
        
        let currentFilter = 'all';
        
        function filterByRoom(roomId) {
            currentFilter = roomId;
            updateFilterButtons();
            displayPlayers();
        }
        
        function updateFilterButtons() {
            // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
            const activeBtn = document.getElementById(`filter${roomId === 'all' ? 'All' : roomId.charAt(0).toUpperCase() + roomId.slice(1)}`);
            if (activeBtn) {
                activeBtn.classList.add('active');
            }
            
            document.getElementById('currentFilter').textContent = roomId === 'all' ? '–í—Å–µ –∏–≥—Ä–æ–∫–∏' : `–ö–æ–º–Ω–∞—Ç–∞ ${roomId.slice(-1)}`;
        }
        
        function displayPlayers() {
            const playersList = document.getElementById('playersList');
            let filteredPlayers;
            
            if (currentFilter === 'all') {
                filteredPlayers = testPlayers;
            } else {
                filteredPlayers = testPlayers.filter(p => p.roomId === currentFilter);
            }
            
            // –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –∏–≥—Ä–æ–∫–æ–≤ –ø–æ –∫–æ–º–Ω–∞—Ç–∞–º
            const groupedPlayers = {};
            filteredPlayers.forEach(player => {
                if (!groupedPlayers[player.roomId]) {
                    groupedPlayers[player.roomId] = [];
                }
                groupedPlayers[player.roomId].push(player);
            });
            
            let html = '';
            Object.keys(groupedPlayers).forEach(roomId => {
                html += `<div class="room-section">
                    <h4>–ö–æ–º–Ω–∞—Ç–∞: ${roomId}</h4>`;
                
                groupedPlayers[roomId].forEach(player => {
                    html += `<div class="player-item">
                        <div>
                            <span class="player-id">${player.username}</span>
                            <span class="room-id">(ID: ${player.id})</span>
                        </div>
                        <div>
                            <span>–ë–∞–ª–∞–Ω—Å: ${player.balance}$</span>
                            <span class="socket-id">Socket: ${player.socketId}</span>
                        </div>
                    </div>`;
                });
                
                html += '</div>';
            });
            
            if (filteredPlayers.length === 0) {
                html = '<p>–ù–µ—Ç –∏–≥—Ä–æ–∫–æ–≤ –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–æ–º–Ω–∞—Ç–µ</p>';
            }
            
            playersList.innerHTML = html;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
            document.getElementById('totalPlayers').textContent = testPlayers.length;
            document.getElementById('filteredPlayers').textContent = filteredPlayers.length;
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        displayPlayers();
        
        // –õ–æ–≥–∏—Ä—É–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        console.log('Test players filter page loaded:', {
            totalPlayers: testPlayers.length,
            rooms: [...new Set(testPlayers.map(p => p.roomId))],
            timestamp: new Date().toISOString()
        });
    </script>
</body>
</html>
