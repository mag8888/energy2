# üéØ CORE MODULE - –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏–≥—Ä—ã CASHFLOW

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ú–æ–¥—É–ª—å CORE —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å—é –æ—Å–Ω–æ–≤–Ω—É—é –∏–≥—Ä–æ–≤—É—é –ª–æ–≥–∏–∫—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º. –≠—Ç–æ —Å–µ—Ä–¥—Ü–µ –∏–≥—Ä—ã, –∫–æ—Ç–æ—Ä–æ–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:

- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
- –õ–æ–≥–∏–∫—É –∏–≥—Ä–æ–∫–æ–≤ –∏ –∫–æ–º–Ω–∞—Ç
- –û—Å–Ω–æ–≤–Ω–æ–π –∏–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫
- –ò–º–º—É—Ç–∞–±–µ–ª—å–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
core/
‚îú‚îÄ‚îÄ index.js          # –ì–ª–∞–≤–Ω—ã–π —ç–∫—Å–ø–æ—Ä—Ç –º–æ–¥—É–ª—è
‚îú‚îÄ‚îÄ gameState.js      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
‚îú‚îÄ‚îÄ player.js         # –ö–ª–∞—Å—Å –∏–≥—Ä–æ–∫–∞
‚îú‚îÄ‚îÄ room.js           # –ö–ª–∞—Å—Å –∏–≥—Ä–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã
‚îú‚îÄ‚îÄ gameEngine.js     # –û—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ –∏–≥—Ä—ã
‚îú‚îÄ‚îÄ package.json      # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–¥—É–ª—è
‚îî‚îÄ‚îÄ rollup.config.js  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏
```

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```javascript
import { GameEngine, Player, Room, GameState } from '@cashflow/core';

// –°–æ–∑–¥–∞–µ–º –∏–≥—Ä–æ–≤–æ–π –¥–≤–∏–∂–æ–∫
const gameEngine = new GameEngine();

// –°–æ–∑–¥–∞–µ–º –∫–æ–º–Ω–∞—Ç—É
const room = gameEngine.createRoom('room123', 4);

// –î–æ–±–∞–≤–ª—è–µ–º –∏–≥—Ä–æ–∫–∞
gameEngine.addPlayerToRoom('room123', 'player1', { username: 'Alice' });

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
gameEngine.setPlayerReady('room123', 'player1', true);
```

## üì¶ –≠–∫—Å–ø–æ—Ä—Ç—ã

### **GameEngine**
–û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–≥—Ä–æ–π:
- `createRoom(roomId, maxPlayers)` - —Å–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `addPlayerToRoom(roomId, playerId, playerData)` - –¥–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- `setPlayerReady(roomId, playerId, ready)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- `processPlayerTurn(roomId, playerId, action, data)` - –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ö–æ–¥

### **Player**
–ö–ª–∞—Å—Å –∏–≥—Ä–æ–∫–∞ —Å –º–µ—Ç–æ–¥–∞–º–∏:
- `getInfo()` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- `setReady(ready)` - —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
- `movePosition(steps)` - –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –ø–æ –ø–æ–ª—é
- `changeBalance(amount)` - –∏–∑–º–µ–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å

### **Room**
–ö–ª–∞—Å—Å –∏–≥—Ä–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã:
- `getInfo()` - –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–º–Ω–∞—Ç–µ
- `addPlayer(playerId, playerData)` - –¥–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞
- `startGame()` - –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É
- `nextTurn()` - —Å–ª–µ–¥—É—é—â–∏–π —Ö–æ–¥

### **GameState**
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
- `getState()` - –ø–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `updateState(updater)` - –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ
- `addPlayer(playerId, playerData)` - –¥–æ–±–∞–≤–∏—Ç—å –∏–≥—Ä–æ–∫–∞

## üîí –ò–∑–æ–ª—è—Ü–∏—è

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω** –∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π:
- ‚ùå –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ `@cashflow/ui`
- ‚ùå –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ `@cashflow/network`
- ‚ùå –ù–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –∏–∑ `@cashflow/data`
- ‚úÖ –ú–æ–∂–µ—Ç –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ `immer` –¥–ª—è –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã –º–æ–¥—É–ª—è
npm run test

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
npm run dev

# –°–æ–±—Ä–∞—Ç—å –º–æ–¥—É–ª—å
npm run build
```

## üìù –ü—Ä–∏–º–µ—Ä—ã

### **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–π –∏–≥—Ä—ã**

```javascript
import { GameEngine } from '@cashflow/core';

const engine = new GameEngine();

// –°–æ–∑–¥–∞–µ–º –∫–æ–º–Ω–∞—Ç—É
engine.createRoom('test-room', 2);

// –î–æ–±–∞–≤–ª—è–µ–º –∏–≥—Ä–æ–∫–æ–≤
engine.addPlayerToRoom('test-room', 'player1', { username: 'Alice' });
engine.addPlayerToRoom('test-room', 'player2', { username: 'Bob' });

// –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
engine.setPlayerReady('test-room', 'player1', true);
engine.setPlayerReady('test-room', 'player2', true);

// –ò–≥—Ä–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –≤—Å–µ –∏–≥—Ä–æ–∫–∏ –≥–æ—Ç–æ–≤—ã
```

### **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞**

```javascript
// –ò–≥—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ
const result = engine.processPlayerTurn('test-room', 'player1', 'roll_dice', { steps: 5 });

console.log(result);
// {
//   success: true,
//   nextTurn: 'player2',
//   action: 'roll_dice',
//   data: { steps: 5 }
// }
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —ç—Ç–æ–≥–æ –º–æ–¥—É–ª—è:

1. **–ù–µ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** –Ω–∞ –¥—Ä—É–≥–∏–µ –º–æ–¥—É–ª–∏ CASHFLOW
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ** `immer` –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
3. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
4. **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ** –Ω–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã –∏ –∫–ª–∞—Å—Å—ã

---

**üéØ CORE –º–æ–¥—É–ª—å - –æ—Å–Ω–æ–≤–∞ –≤—Å–µ–π –∏–≥—Ä—ã CASHFLOW!**
